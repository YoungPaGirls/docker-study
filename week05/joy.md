## OT
### 강의 알차게 듣는 법

- 어렵게 공부해야 머리에 남는다. → 도식화, 사람들에게 설명하기, 나만의 언어로 요약하기
- 기록하자! → 복붙하지 말고, 나만의 언어로!

## Docker 기본 개념 
### Docker를 왜 배우는 걸까?

도커를 사용하는 가장 큰 이유는 이식성이다.

이식성: 특정 프로그램을 다른 곳으로 쉽게 옮겨서 설치 및 실행할 수 있는 특성

다른 장점

- 귀찮은 설치 과정을 전체를 반복할 필요 없다.
- 버전, 환경 설정, 옵션 등 일관되게 프로그램을 설치할 수 있다.
- 각 프로그램이 독립적인 환경에서 실행할 수 있어서 충돌이 일어나지 않는다.

### IP와 Port

ip 주소는 네트워크상 특정 컴퓨터를 가리키는 주소 

port는 컴퓨터 내 프로그램의 주소이다. 

- 브라우저 창에 포트 번호를 입력하지 않는 이유?
    - 브라우저는 기본적으로 80번 포트로 통신
    - 원하지 않는다면 명시하면 됨
- 잘 알려진 포트란?
    - 0~65535 포트번호 사용 가능.
    - 0~1023 까지는 규약에 따라 이미 정해져있음.(권장)
        - 22, 80, 443
    - 꼭 지킬필요 없음

### 도커, 컨테이너, 이미지란?

- 도커: 컨테이너를 사용하고, 여러 프로그램을 분리된 환경에서 실행하고 관리할 수 있는 툴
- 컨테이너: 하나의 컴퓨터 환경 내에서 독립적인 환경을 구성하여 프로그램을 설치할 수 있도록 만든 개념 (미니컴퓨터 같은 개념)
    - 컨테이너를 포함하는 컴퓨터를 호스트/호스트 컴퓨터라고 함
    - 컨테이너는 독립성을 가짐
        - 각 컨테이너마다 서로 각자의 저장공간을 가짐
        - 컨테이너마다 고유의 네트워크를 가지고 있음 (IP, Port)
- 이미지: 프로그램을 실행하는 데 필요한 설치 과정, 설정, 버전 정보 등을 포함하고 있음 = 프로그램을 실행하는데 필요한 것들을 모두 포함

## 현업에서 자주 사용하는 Docker CLI 익히기 
### 1. 이미지(Image) 다운로드

docker hub: 이미지를 저장하고 다운 받을 수 있는 저장소 역할을 하는 서비스

이미지도 버전 관리가 된다.

태그명: 이미지 버전을 의미

```jsx
docker pull 이미지명:tag명
```

### 2. 이미지 조회/삭제

```jsx
docker image ls
```

- 이미지 조회
    - Repository: 이미지 이름
    - tag: 이미지 태그명
    - image id: 고유값
    - created: 이미지가 생성된 날짜 (다운 날짜 X)
    - size: 이미지 크기(용량)

```bash
docker image rm {image id}

# 강제 삭제
docker image rm -f {image id}

```

- 이미지 삭제
    - id 일부만 적어도 삭제된다.
    - -f 옵션을 넣으면 중단된 컨테이너의 이미지는 삭제해주지만, 실행중인 컨테이너의 이미지는 삭제할 수 없음
    

```bash
docker image rm ${docker images -q}
```

- 컨테이너에서 사용하고 있지 않은 전체 이미지 삭제

### 3. 컨테이너(Container) 생성/실행 1

- 컨테이너 생성
    - 미리 다운받지 않은 이미지도 자동으로 다운받아짐
    - 먼저 호스트 이미지 탐색하고 없으면 자동 다운 받는 개념

```bash
docker create {이미지명}
```

- 생성 됐는지 확인

```bash
docker ps -a 
```

- 컨테이너 실행

```bash
docker start {container id}
```

### 4. 컨테이너(Container) 생성/실행 2

- 컨테이너 중단

```bash
docker stop {container id}
```

- 컨테이너 삭제

```bash
docker rm {container id}
```

- 컨테이너 생성 및 실행

```bash
docker run {이미지명}
```

-  포그라운드(foreground)

  - 내가 실행시킨 프로그램의 내용이 화면에 실행되고 출력되는 상태
  - 실행한 프로그램 모니터링 가능한 장점 & 다른 프로그램을 조작하기 어려운 단점

- 백그라운드(background)

  - 내가 실행시킨 프로그램이 컴퓨터 내부적으로 실행되는 상태
  - 백그라운드 실행하기

```bash
docker run -d {이미지명}
```

-  컨테이너에 이름 붙여서 생성 및 실행

```bash
docker run -d --name {컨테이너 이름} {이미지명}
```

-  호스트 포트와 컨테이너 포트 맵핑하여 생성 및 실행

```bash
docker run -d -p {호스트 포트}:{컨테이너 포트} {이미지명}
```

### 컨테이너 조회/중지/삭제

- 실행중인 컨테이너 조회

```bash
docker ps 
```

- 전체 컨테이너 조회

```bash
docker ps -a
```

- 일반 정지

```bash
docker stop {컨테이너 id}
```

- 강제 정지

```bash
docker kill {컨테이너 id}
```

- 컨테이너 삭제

```bash
docker rm {컨테이너 id}
```

- 중지된 컨테이너 전체 삭제

```bash
docker rm $(docker ps -qa)
```

### 컨테이너 로그 조회

```bash
docker logs {컨테이너 id}

# 마지막 일부 로그만 볼 때 
docker logs --tail {원하는 출력 줄 수} {컨테이너 id}

# 실시간 로그 확인 
docker logs -f  {컨테이너 id}

# 앞으로 쌓일 로그들만 실시간 확인
docker logs --tail 0 -f {컨테이너 id}
```

### 실행중인 컨테이너 내부 접속 (exec -it)

```bash
docker exec -it {컨테이너 id} bash 
```

### Docker로 Redis 실행시켜보기

```bash
docker run -d -p 6379:6379 redis 
```

- 레디스 접속

```bash
redis-cli
```
